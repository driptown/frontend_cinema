{"ast":null,"code":"import API from '../../API';\nimport { addFavouritesAction, deleteFavouritesAction, fetchFavouritesAction } from './action';\nconst api = new API();\nconst FAVOURITES_KEY = 'FAVOURITES_KEY';\nexport const fetchFromLocalStorage = () => {\n  return async dispatch => {\n    let favouritesJSON = localStorage.getItem(FAVOURITES_KEY);\n    let favourites = [];\n\n    if (favouritesJSON) {\n      favourites = JSON.parse(favouritesJSON);\n    }\n\n    dispatch(fetchFavouritesAction(favourites));\n  };\n};\nexport const addFavourite = image => {\n  return async (dispatch, getState) => {\n    let prevFavourites = getState().favourites.list;\n    const nextFavourites = [image, ...prevFavourites];\n    setToLocalStorage(nextFavourites);\n    dispatch(addFavouritesAction(nextFavourites));\n  };\n};\nexport const deleteFavourite = id => {\n  return async (dispatch, getState) => {\n    let prevFavourites = getState().favourites.list;\n    const nextFavourites = prevFavourites.filter(image => image.id != id);\n    setToLocalStorage(nextFavourites);\n    dispatch(deleteFavouritesAction(nextFavourites));\n  };\n};\n\nconst setToLocalStorage = favourites => {\n  localStorage.setItem(FAVOURITES_KEY, JSON.stringify(favourites));\n};","map":{"version":3,"names":["API","addFavouritesAction","deleteFavouritesAction","fetchFavouritesAction","api","FAVOURITES_KEY","fetchFromLocalStorage","dispatch","favouritesJSON","localStorage","getItem","favourites","JSON","parse","addFavourite","image","getState","prevFavourites","list","nextFavourites","setToLocalStorage","deleteFavourite","id","filter","setItem","stringify"],"sources":["C:/Users/Jacob/Desktop/cinema/frontend/src/reducks/favourites/operations.js"],"sourcesContent":["import API from '../../API';\r\nimport { addFavouritesAction, deleteFavouritesAction, fetchFavouritesAction } from './action';\r\n\r\nconst api = new API();\r\nconst FAVOURITES_KEY = 'FAVOURITES_KEY';\r\n\r\nexport const fetchFromLocalStorage = () => {\r\n    return async dispatch => {\r\n        let favouritesJSON = localStorage.getItem(FAVOURITES_KEY);\r\n        let favourites = [];\r\n        if (favouritesJSON) {\r\n            favourites = JSON.parse(favouritesJSON);\r\n        }\r\n        dispatch(fetchFavouritesAction(favourites));\r\n    };\r\n};\r\n\r\nexport const addFavourite = image => {\r\n    return async (dispatch, getState) => {\r\n        let prevFavourites = getState().favourites.list;\r\n        const nextFavourites = [image, ...prevFavourites];\r\n        setToLocalStorage(nextFavourites);\r\n        dispatch(addFavouritesAction(nextFavourites));\r\n    };\r\n};\r\n\r\nexport const deleteFavourite = id => {\r\n    return async (dispatch, getState) => {\r\n        let prevFavourites = getState().favourites.list;\r\n        const nextFavourites = prevFavourites.filter(image => image.id != id);\r\n        setToLocalStorage(nextFavourites);\r\n        dispatch(deleteFavouritesAction(nextFavourites));\r\n    };\r\n};\r\n\r\nconst setToLocalStorage = favourites => {\r\n    localStorage.setItem(FAVOURITES_KEY, JSON.stringify(favourites));\r\n};"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,WAAhB;AACA,SAASC,mBAAT,EAA8BC,sBAA9B,EAAsDC,qBAAtD,QAAmF,UAAnF;AAEA,MAAMC,GAAG,GAAG,IAAIJ,GAAJ,EAAZ;AACA,MAAMK,cAAc,GAAG,gBAAvB;AAEA,OAAO,MAAMC,qBAAqB,GAAG,MAAM;EACvC,OAAO,MAAMC,QAAN,IAAkB;IACrB,IAAIC,cAAc,GAAGC,YAAY,CAACC,OAAb,CAAqBL,cAArB,CAArB;IACA,IAAIM,UAAU,GAAG,EAAjB;;IACA,IAAIH,cAAJ,EAAoB;MAChBG,UAAU,GAAGC,IAAI,CAACC,KAAL,CAAWL,cAAX,CAAb;IACH;;IACDD,QAAQ,CAACJ,qBAAqB,CAACQ,UAAD,CAAtB,CAAR;EACH,CAPD;AAQH,CATM;AAWP,OAAO,MAAMG,YAAY,GAAGC,KAAK,IAAI;EACjC,OAAO,OAAOR,QAAP,EAAiBS,QAAjB,KAA8B;IACjC,IAAIC,cAAc,GAAGD,QAAQ,GAAGL,UAAX,CAAsBO,IAA3C;IACA,MAAMC,cAAc,GAAG,CAACJ,KAAD,EAAQ,GAAGE,cAAX,CAAvB;IACAG,iBAAiB,CAACD,cAAD,CAAjB;IACAZ,QAAQ,CAACN,mBAAmB,CAACkB,cAAD,CAApB,CAAR;EACH,CALD;AAMH,CAPM;AASP,OAAO,MAAME,eAAe,GAAGC,EAAE,IAAI;EACjC,OAAO,OAAOf,QAAP,EAAiBS,QAAjB,KAA8B;IACjC,IAAIC,cAAc,GAAGD,QAAQ,GAAGL,UAAX,CAAsBO,IAA3C;IACA,MAAMC,cAAc,GAAGF,cAAc,CAACM,MAAf,CAAsBR,KAAK,IAAIA,KAAK,CAACO,EAAN,IAAYA,EAA3C,CAAvB;IACAF,iBAAiB,CAACD,cAAD,CAAjB;IACAZ,QAAQ,CAACL,sBAAsB,CAACiB,cAAD,CAAvB,CAAR;EACH,CALD;AAMH,CAPM;;AASP,MAAMC,iBAAiB,GAAGT,UAAU,IAAI;EACpCF,YAAY,CAACe,OAAb,CAAqBnB,cAArB,EAAqCO,IAAI,CAACa,SAAL,CAAed,UAAf,CAArC;AACH,CAFD"},"metadata":{},"sourceType":"module"}